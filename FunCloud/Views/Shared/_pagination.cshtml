@{
    string Action = ViewBag.Action;

    int Page = ViewBag.Page;
    int Pages = ViewBag.Pages;

    int Back = (Page > 0) ? Page - 1 : 0;
    int Next = (Page < Pages - 1) ? Page + 1 : Pages - 1;

}

@if (Pages > 1)
{

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center m-0">
            @if (Page == 0)
            {
                <li class="page-item">
                    <a class="page-link active disabled" tabindex="-1" aria-disabled="true">Назад</a>
                </li>
                <li class="page-item">
                    <a class="page-link active disabled" tabindex="-1" aria-disabled="true">1</a>
                </li>
            }
            else
            {
                <li class="page-item">
                    <a class="page-link" href="~/@Action&page=@Back" tabindex="-1" aria-disabled="true">Назад</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="~/@Action&page=0" tabindex="-1" aria-disabled="true">1</a>
                </li>
            }

            @if (Page > 3)
            {
                <li class="page-item">
                    <a class="page-link disabled" href="#" tabindex="-1" aria-disabled="true">...</a>
                </li>
            }

            @{ 
                int i = 1;

                if (Page > 2)
                {
                    i = Page - 2;
                }
            }

            @for (; i < Pages - 1 && i < Page + 3; i++)
            {
                if (i > -1 && i < Pages)
                {
                    if (i != Page)
                    {
                        <li class="page-item">
                            <a class="page-link" href="~/@Action&page=@i" tabindex="-1" aria-disabled="true">@(i + 1)</a>
                        </li>
                    }
                    else
                    {
                        <li class="page-item">
                            <a class="page-link active disabled" tabindex="-1" aria-disabled="true">@(i + 1)</a>
                        </li>
                    }
                } else
                {
                    <li class="page-item">
                        <a class="page-link" href="~/@Action&page=@i" tabindex="-1" aria-disabled="true">-1</a>
                    </li>
                }
            }

            @if (Page < Pages - 4)
            {
                <li class="page-item">
                    <a class="page-link disabled" href="#" tabindex="-1" aria-disabled="true">...</a>
                </li>
            }

            @if (Page == Pages - 1)
            {
                <li class="page-item">
                    <a class="page-link active disabled" tabindex="-1" aria-disabled="true">@Pages</a>
                </li>
                <li class="page-item">
                    <a class="page-link active disabled" tabindex="-1" aria-disabled="true">Вперед</a>
                </li>
            }
            else
            {
                <li class="page-item">
                    <a class="page-link" href="~/@Action&page=@(Pages - 1)" tabindex="-1" aria-disabled="true">@Pages</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="~/@Action&page=@Next">Вперед</a>
                </li>
            }

        </ul>
    </nav>
}
